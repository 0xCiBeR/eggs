{
    "_comment": "Pterodactyl V Rising Egg ~ David Wolfe (Red-Thirten) and Kapatheus ~ 2022-05-26",
    "meta": {
        "version": "PTDL_v1",
        "update_url": null
    },
    "name": "V Rising",
    "author": "rehlmgaming@gmail.com",
    "description": "Awaken as a vampire. Hunt for blood in nearby settlements to regain your strength and evade the scorching sun to survive. Raise your castle and thrive in an ever-changing open world full of mystery. Gain allies online and conquer the land of the living.",
    "features": [
        "steam_disk_space"
    ],
    "images": [
        "ghcr.io\/parkervcp\/yolks:wine_latest"
    ],
    "file_denylist": [],
    "startup": "wine64 .\/VRisingServer.exe -persistentDataPath save-data -address 0.0.0.0",
    "config": {
        "files": "{\r\n\t\"save-data\/Settings\/ServerHostSettings.json\": {\r\n\t\t\"parser\": \"json\",\r\n\t\t\"find\": {\r\n\t\t\t\"Name\": \"{{server.build.env.SERVER_NAME}}\",\r\n\t\t\t\"Description\": \"{{server.build.env.DESCRIPTION}}\",\r\n\t\t\t\"Port\": \"{{server.build.default.port}}\",\r\n\t\t\t\"QueryPort\": \"{{server.build.env.QUERY_PORT}}\",\r\n\t\t\t\"MaxConnectedUsers\": \"{{server.build.env.MAX_PLAYERS}}\",\r\n\t\t\t\"MaxConnectedAdmins\": \"{{server.build.env.MAX_ADMINS}}\",\r\n\t\t\t\"ServerFps\": \"{{server.build.env.FPS}}\",\r\n\t\t\t\"SaveName\": \"{{server.build.env.SAVE_NAME}}\",\r\n\t\t\t\"Password\": \"{{server.build.env.SERVER_PASSWORD}}\",\r\n\t\t\t\"Secure\": \"{{server.build.env.SERVER_SECURE}}\",\r\n\t\t\t\"ListOnMasterServer\": \"{{server.build.env.SERVER_LIST}}\",\r\n\t\t\t\"AutoSaveCount\": \"{{server.build.env.SAVE_COUNT}}\",\r\n\t\t\t\"AutoSaveInterval\": \"{{server.build.env.SAVE_INTERVAL}}\",\r\n\t\t\t\"GameSettingsPreset\": \"{{server.build.env.GAME_SETTINGS_PRESET}}\",\r\n\t\t\t\"AdminOnlyDebugEvents\": \"{{server.build.env.ADMIN_ONLY_DEBUG_EVENTS}}\",\r\n\t\t\t\"DisableDebugEvents\": \"{{server.build.env.DEBUG_EVENTS}}\",\r\n\t\t\t\"Rcon.Enabled\": \"{{server.build.env.RCON}}\",\r\n\t\t\t\"Rcon.Password\": \"{{server.build.env.RCON_PASS}}\",\r\n\t\t\t\"Rcon.Port\": \"{{server.build.env.RCON_PORT}}\"\r\n\t\t}\r\n\t}\r\n}",
        "startup": "{\r\n    \"done\": \"Loaded ServerGameSettings\"\r\n}",
        "logs": "{}",
        "stop": "^C"
    },
    "scripts": {
        "installation": {
            "script": "#!\/bin\/bash\r\n\r\n## File: Pterodactyl V Rising Egg - egg-v-rising.json\r\n## Authors: David Wolfe (Red-Thirten), Kapatheus\r\n## Date: 2022\/05\/26\r\n## License: MIT License\r\n## Image to install with is 'ghcr.io\/parkervcp\/installers:debian'\r\n\r\n# Install packages. Default packages below are skipped if using image noted above, thus speeding up the install process.\r\napt -y update\r\napt -y --no-install-recommends install curl lib32gcc-s1 ca-certificates\r\n\r\n# Download and install SteamCMD\r\nexport HOME=\/mnt\/server\r\ncd \/tmp\r\nmkdir -p $HOME\/steamcmd $HOME\/steamapps\r\ncurl -sSL -o steamcmd.tar.gz https:\/\/steamcdn-a.akamaihd.net\/client\/installer\/steamcmd_linux.tar.gz\r\ntar -xzvf steamcmd.tar.gz -C $HOME\/steamcmd\r\ncd $HOME\/steamcmd\r\n\r\n# SteamCMD fails otherwise for some reason, even running as root.\r\n# This is changed at the end of the install process anyways.\r\nchown -R root:root \/mnt\r\n\r\n# Install game server using SteamCMD\r\n.\/steamcmd.sh +force_install_dir $HOME +login anonymous $( [[ \"${WINDOWS_INSTALL}\" == \"1\" ]] && printf %s '+@sSteamCmdForcePlatformType windows' ) +app_update ${SRCDS_APPID} validate +quit\r\n\r\n# Set up 32 and 64 bit libraries\r\nmkdir -p $HOME\/.steam\/sdk{32,64}\r\ncp -v linux32\/steamclient.so $HOME\/.steam\/sdk32\/steamclient.so\r\ncp -v linux64\/steamclient.so $HOME\/.steam\/sdk64\/steamclient.so\r\n\r\n## V Rising Setup\r\nmkdir -p $HOME\/save-data\/Settings && cd \"$_\"\r\ntouch adminlist.txt banlist.txt\r\ncat > ServerHostSettings.json << EOF\r\n{\r\n  \"Name\": \"${SERVER_NAME}\",\r\n  \"Description\": \"${DESCRIPTION}\",\r\n  \"Port\": ${SERVER_PORT},\r\n  \"QueryPort\": ${QUERY_PORT},\r\n  \"MaxConnectedUsers\": ${MAX_PLAYERS},\r\n  \"MaxConnectedAdmins\": ${MAX_ADMINS},\r\n  \"ServerFps\": ${FPS},\r\n  \"SaveName\": \"${SAVE_NAME}\",\r\n  \"Password\": \"${SERVER_PASSWORD}\",\r\n  \"Secure\": ${SERVER_SECURE},\r\n  \"ListOnMasterServer\": ${SERVER_LIST},\r\n  \"AutoSaveCount\": ${SAVE_COUNT},\r\n  \"AutoSaveInterval\": ${SAVE_INTERVAL},\r\n  \"GameSettingsPreset\": \"${GAME_SETTINGS_PRESET}\",\r\n  \"AdminOnlyDebugEvents\": ${ADMIN_ONLY_DEBUG_EVENTS},\r\n  \"DisableDebugEvents\": ${DEBUG_EVENTS},\r\n  \"Rcon\": {\r\n    \"Enabled\": ${RCON},\r\n    \"Password\": \"${RCON_PASS}\",\r\n    \"Port\": ${RCON_PORT}\r\n  }\r\n}\r\nEOF",
            "container": "ghcr.io\/pterodactyl\/installers:debian",
            "entrypoint": "\/bin\/bash"
        }
    },
    "variables": [
        {
            "name": "[REQUIRED] Server Query Port",
            "description": "UDP port for Steam server list features.",
            "env_variable": "QUERY_PORT",
            "default_value": "9877",
            "user_viewable": false,
            "user_editable": false,
            "rules": "required|integer|between:1024,65536"
        },
        {
            "name": "Automatic Updates",
            "description": "Quickly checks for any server updates on startup, and updates if necessary.",
            "env_variable": "AUTO_UPDATE",
            "default_value": "1",
            "user_viewable": true,
            "user_editable": true,
            "rules": "boolean"
        },
        {
            "name": "Game Mode",
            "description": "What preset of game settings the server should run. Some settings may not apply after the save file is first created. Leave empty\/null if you are using a single-player uploaded save or a custom ServerGameSettings.json file.",
            "env_variable": "GAME_SETTINGS_PRESET",
            "default_value": "StandardPvP",
            "user_viewable": true,
            "user_editable": true,
            "rules": "nullable|string|in:,DuoPvP,HardcorePvP,Level30PvE,Level30PvP,Level50PvE,Level50PvP,Level70PvE,Level70PvP,SoloPvP,StandardPvE_Easy,StandardPvE_Hard,StandardPvE,StandardPvP_Easy,StandardPvP_Hard,StandardPVP"
        },
        {
            "name": "Server Name",
            "description": "Name of the server that will appear in the server list.",
            "env_variable": "SERVER_NAME",
            "default_value": "V Rising Dedicated Server",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string"
        },
        {
            "name": "Server Description",
            "description": "Short description of server purpose, rules, and the message of the day.",
            "env_variable": "DESCRIPTION",
            "default_value": "Welcome to the server!",
            "user_viewable": true,
            "user_editable": true,
            "rules": "nullable|string"
        },
        {
            "name": "Max Connected Users",
            "description": "Max number of concurrent players on the server.",
            "env_variable": "MAX_PLAYERS",
            "default_value": "40",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|integer|min:1"
        },
        {
            "name": "Max Connected Admins",
            "description": "Max number of admins to allow connection even when the server is full.",
            "env_variable": "MAX_ADMINS",
            "default_value": "4",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|integer|min:0"
        },
        {
            "name": "Server Password",
            "description": "Password required to join the server. Leave blank to have no password.",
            "env_variable": "SERVER_PASSWORD",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "nullable|string"
        },
        {
            "name": "Save Name",
            "description": "Name of save file \/ directory.",
            "env_variable": "SAVE_NAME",
            "default_value": "world1",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string"
        },
        {
            "name": "Auto Save Count",
            "description": "Number of autosaves to keep.",
            "env_variable": "SAVE_COUNT",
            "default_value": "50",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|integer|min:0"
        },
        {
            "name": "Auto Save Interval",
            "description": "Interval in seconds between each autosave.",
            "env_variable": "SAVE_INTERVAL",
            "default_value": "600",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|integer|min:1"
        },
        {
            "name": "List On Master Server",
            "description": "Set to true to list on the server list, else set to false.",
            "env_variable": "SERVER_LIST",
            "default_value": "true",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|in:true,false"
        },
        {
            "name": "[Repair] Validate Server Files",
            "description": "Leave empty (no value) for OFF or type \"true\" or \"1\" for ON. Validates all server files when Automatic Updates is enabled. Note: This will significantly increase server startup times, so it is recommended to only enable this when needed.",
            "env_variable": "VALIDATE",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "string|nullable"
        },
        {
            "name": "[Advanced] Server FPS",
            "description": "How often the server refreshes. (Default: 30)",
            "env_variable": "FPS",
            "default_value": "30",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|integer|min:1"
        },
        {
            "name": "[Advanced] Enable RCON",
            "description": "See the following link for info on how to connect and use RCON: https:\/\/github.com\/StunlockStudios\/vrising-dedicated-server-instructions#rcon",
            "env_variable": "RCON",
            "default_value": "false",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|in:true,false"
        },
        {
            "name": "[Advanced] RCON Password",
            "description": "Password required to connect to RCON if it is enabled.",
            "env_variable": "RCON_PASS",
            "default_value": "somepassword",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string"
        },
        {
            "name": "[Advanced] RCON Port",
            "description": "Port used to connect to RCON. Must be allocated to the server for RCON to work.",
            "env_variable": "RCON_PORT",
            "default_value": "25575",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|integer|between:1024,65536"
        },
        {
            "name": "[Advanced] Secure Server",
            "description": "(true or false)",
            "env_variable": "SERVER_SECURE",
            "default_value": "true",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|in:true,false"
        },
        {
            "name": "[Advanced] Admin Only Debug Events",
            "description": "(true or false)",
            "env_variable": "ADMIN_ONLY_DEBUG_EVENTS",
            "default_value": "true",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|in:true,false"
        },
        {
            "name": "[Advanced] Disable Debug Events",
            "description": "(true or false)",
            "env_variable": "DEBUG_EVENTS",
            "default_value": "false",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|in:true,false"
        },
        {
            "name": "[Advanced] V Rising Dedicated Server App ID",
            "description": "Used for installation and updates. Rarely needs to be changed.",
            "env_variable": "SRCDS_APPID",
            "default_value": "1829350",
            "user_viewable": false,
            "user_editable": false,
            "rules": "required|integer"
        },
        {
            "name": "[Advanced] Use Windows Branch",
            "description": "Tells the installer\/updater to only download the Windows branch of the server (the only branch currently available) so that it can run on Wine. Cannot be changed.",
            "env_variable": "WINDOWS_INSTALL",
            "default_value": "1",
            "user_viewable": false,
            "user_editable": false,
            "rules": "required|string|in:1"
        }
    ]
}